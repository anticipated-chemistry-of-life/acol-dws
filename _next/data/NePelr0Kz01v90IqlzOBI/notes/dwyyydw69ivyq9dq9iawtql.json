{"pageProps":{"note":{"id":"dwyyydw69ivyq9dq9iawtql","title":"2024-10-14","desc":"","updated":1728970884567,"created":1728912731843,"traitIds":["open-notebook-mvisani"],"custom":{},"fname":"open-notebook.2024.10.14","type":"note","vault":{"fsPath":".","selfContained":true,"name":"acol-dws"},"contentHash":"276b29c80e61de9e9f6331f9edea6171","links":[],"anchors":{"this-is-marcos-daily-open-notebook":{"type":"header","text":"This is Marco's daily open-notebook.","value":"this-is-marcos-daily-open-notebook","line":9,"column":0,"depth":1},"meeting-with-madleina":{"type":"header","text":"Meeting with Madleina","value":"meeting-with-madleina","line":13,"column":0,"depth":2},"notes":{"type":"header","text":"Notes","value":"notes","line":20,"column":0,"depth":2},"todo-today":{"type":"header","text":"Todo today","value":"todo-today","line":80,"column":0,"depth":2},"doing":{"type":"header","text":"Doing","value":"doing","line":83,"column":0,"depth":2},"done":{"type":"header","text":"Done","value":"done","line":86,"column":0,"depth":2},"todo-tomorrow":{"type":"header","text":"Todo tomorrow","value":"todo-tomorrow","line":90,"column":0,"depth":2}},"children":[],"parent":"kjgqsjr9hg1l8loakr85lcc","data":{}},"body":"<h1 id=\"2024-10-14\">2024-10-14<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#2024-10-14\"></a></h1>\n<h1 id=\"this-is-marcos-daily-open-notebook\">This is Marco's daily open-notebook.<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#this-is-marcos-daily-open-notebook\"></a></h1>\n<p>Today is 2024.10.14</p>\n<h2 id=\"meeting-with-madleina\">Meeting with Madleina<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#meeting-with-madleina\"></a></h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> start by creatin a script that is able to fetch phylogeny from lotus and molecules</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> use Cache</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> for species, get full wikidata taxo, then remove all species with their parent that are not in lotus.</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> input should be a node and then it will get all the children of that node : Plantae --> all the children of plantae</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled> use that to subset lotus</li>\n</ul>\n<h2 id=\"notes\">Notes<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#notes\"></a></h2>\n<p>This is the qlever sparql query to get all the mammals and their parent taxa.</p>\n<pre class=\"language-sparql\"><code class=\"language-sparql\"><span class=\"token keyword\">PREFIX</span> <span class=\"token function\"><span class=\"token prefix\">wdt<span class=\"token punctuation\">:</span></span></span> <span class=\"token url\"><span class=\"token punctuation\">&#x3C;</span>http://www.wikidata.org/prop/direct/<span class=\"token punctuation\">></span></span>\n<span class=\"token keyword\">PREFIX</span> <span class=\"token function\"><span class=\"token prefix\">rdfs<span class=\"token punctuation\">:</span></span></span> <span class=\"token url\"><span class=\"token punctuation\">&#x3C;</span>http://www.w3.org/2000/01/rdf-schema#<span class=\"token punctuation\">></span></span>\n<span class=\"token keyword\">PREFIX</span> <span class=\"token function\"><span class=\"token prefix\">wd<span class=\"token punctuation\">:</span></span></span> <span class=\"token url\"><span class=\"token punctuation\">&#x3C;</span>http://www.wikidata.org/entity/<span class=\"token punctuation\">></span></span>\n\n<span class=\"token keyword\">SELECT</span> <span class=\"token variable\">?taxon</span> <span class=\"token variable\">?taxon_name</span> <span class=\"token variable\">?taxon_rank</span> <span class=\"token variable\">?taxon_rank_label</span> <span class=\"token variable\">?taxon_parent</span> <span class=\"token variable\">?parent_name</span> <span class=\"token keyword\">WHERE</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token variable\">?taxon</span> <span class=\"token function\"><span class=\"token prefix\">wdt<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">P225</span></span> <span class=\"token variable\">?taxon_name</span><span class=\"token punctuation\">;</span>\n         <span class=\"token function\"><span class=\"token prefix\">wdt<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">P105</span></span> <span class=\"token variable\">?taxon_rank</span><span class=\"token punctuation\">;</span>\n         <span class=\"token function\"><span class=\"token prefix\">wdt<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">P171</span></span>* <span class=\"token function\"><span class=\"token prefix\">wd<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">Q7377</span></span><span class=\"token punctuation\">;</span>      <span class=\"token comment\"># Recursively fetches all taxa with Mammal as an ancestor</span>\n         <span class=\"token function\"><span class=\"token prefix\">wdt<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">P171</span></span> <span class=\"token variable\">?taxon_parent</span><span class=\"token punctuation\">.</span>\n\n  <span class=\"token variable\">?taxon_rank</span> <span class=\"token function\"><span class=\"token prefix\">rdfs<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">label</span></span> <span class=\"token variable\">?taxon_rank_label</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">FILTER</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">lang</span><span class=\"token punctuation\">(</span><span class=\"token variable\">?taxon_rank_label</span><span class=\"token punctuation\">)</span> = <span class=\"token string\">\"en\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">FILTER</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">?taxon_rank</span> != <span class=\"token function\"><span class=\"token prefix\">wd<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">Q68947</span></span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># Exclude taxa with rank \"subspecies\"</span>\n\n  <span class=\"token variable\">?taxon_parent</span> <span class=\"token function\"><span class=\"token prefix\">wdt<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">P225</span></span> <span class=\"token variable\">?parent_name</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>This is a nice query because we can then create a function that will fetch all the children of a node. We will use the Mammal for testing our model as they are not too many. </p>\n<p>What I need to do then is to create a function that given a root node, will return all the children (with the option of filtering the sub-species). It should also be able to not rerun the full function if the query and the output of that query is already in the cache.</p>\n<p>This query : </p>\n<pre class=\"language-sparql\"><code class=\"language-sparql\"><span class=\"token keyword\">PREFIX</span> <span class=\"token function\"><span class=\"token prefix\">wdt<span class=\"token punctuation\">:</span></span></span> <span class=\"token url\"><span class=\"token punctuation\">&#x3C;</span>http://www.wikidata.org/prop/direct/<span class=\"token punctuation\">></span></span>\n<span class=\"token keyword\">PREFIX</span> <span class=\"token function\"><span class=\"token prefix\">p<span class=\"token punctuation\">:</span></span></span> <span class=\"token url\"><span class=\"token punctuation\">&#x3C;</span>http://www.wikidata.org/prop/<span class=\"token punctuation\">></span></span>\n<span class=\"token keyword\">PREFIX</span> <span class=\"token function\"><span class=\"token prefix\">ps<span class=\"token punctuation\">:</span></span></span> <span class=\"token url\"><span class=\"token punctuation\">&#x3C;</span>http://www.wikidata.org/prop/statement/<span class=\"token punctuation\">></span></span>\n<span class=\"token keyword\">PREFIX</span> <span class=\"token function\"><span class=\"token prefix\">pr<span class=\"token punctuation\">:</span></span></span> <span class=\"token url\"><span class=\"token punctuation\">&#x3C;</span>http://www.wikidata.org/prop/reference/<span class=\"token punctuation\">></span></span>\n<span class=\"token keyword\">PREFIX</span> <span class=\"token function\"><span class=\"token prefix\">rdfs<span class=\"token punctuation\">:</span></span></span> <span class=\"token url\"><span class=\"token punctuation\">&#x3C;</span>http://www.w3.org/2000/01/rdf-schema#<span class=\"token punctuation\">></span></span>\n<span class=\"token keyword\">PREFIX</span> <span class=\"token function\"><span class=\"token prefix\">wd<span class=\"token punctuation\">:</span></span></span> <span class=\"token url\"><span class=\"token punctuation\">&#x3C;</span>http://www.wikidata.org/entity/<span class=\"token punctuation\">></span></span>\n\n<span class=\"token keyword\">PREFIX</span> <span class=\"token function\"><span class=\"token prefix\">prov<span class=\"token punctuation\">:</span></span></span> <span class=\"token url\"><span class=\"token punctuation\">&#x3C;</span>http://www.w3.org/ns/prov#<span class=\"token punctuation\">></span></span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">DISTINCT</span> <span class=\"token variable\">?structure</span> <span class=\"token variable\">?structure_inchikey</span> <span class=\"token variable\">?taxon</span> <span class=\"token variable\">?taxon_name</span> <span class=\"token variable\">?reference</span> <span class=\"token variable\">?reference_doi</span> <span class=\"token variable\">?taxon_rank</span> <span class=\"token variable\">?taxon_rank_label</span> <span class=\"token variable\">?taxon_parent</span> <span class=\"token variable\">?parent_name</span> <span class=\"token keyword\">WHERE</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token variable\">?structure</span> <span class=\"token function\"><span class=\"token prefix\">wdt<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">P235</span></span> <span class=\"token variable\">?structure_inchikey</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\"># get the inchikey</span>\n    <span class=\"token function\"><span class=\"token prefix\">p<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">P703</span></span> <span class=\"token variable\">?taxon_statement</span><span class=\"token punctuation\">.</span>                <span class=\"token comment\"># find the statement node</span>\n  \n  <span class=\"token variable\">?taxon_statement</span> <span class=\"token function\"><span class=\"token prefix\">ps<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">P703</span></span> <span class=\"token variable\">?taxon</span><span class=\"token punctuation\">.</span>          <span class=\"token comment\"># get the taxon from the statement node</span>\n  <span class=\"token variable\">?taxon_statement</span> <span class=\"token function\"><span class=\"token prefix\">prov<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">wasDerivedFrom</span></span> <span class=\"token variable\">?ref_node</span><span class=\"token punctuation\">.</span> <span class=\"token comment\"># get the reference node from the statement node</span>\n  <span class=\"token variable\">?ref_node</span> <span class=\"token function\"><span class=\"token prefix\">pr<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">P248</span></span> <span class=\"token variable\">?reference</span><span class=\"token punctuation\">.</span>             <span class=\"token comment\"># get the reference item</span>\n\n  <span class=\"token variable\">?taxon</span> <span class=\"token function\"><span class=\"token prefix\">wdt<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">P225</span></span> <span class=\"token variable\">?taxon_name</span><span class=\"token punctuation\">;</span>              <span class=\"token comment\"># get the taxon scientific name</span>\n         <span class=\"token function\"><span class=\"token prefix\">wdt<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">P105</span></span> <span class=\"token variable\">?taxon_rank</span><span class=\"token punctuation\">;</span>              <span class=\"token comment\"># get the taxon rank</span>\n         <span class=\"token function\"><span class=\"token prefix\">wdt<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">P171</span></span>* <span class=\"token function\"><span class=\"token prefix\">wd<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">Q21730</span></span><span class=\"token punctuation\">;</span>                <span class=\"token comment\"># recursively fetch all taxa with Asterales as an ancestor</span>\n         <span class=\"token function\"><span class=\"token prefix\">wdt<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">P171</span></span> <span class=\"token variable\">?taxon_parent</span><span class=\"token punctuation\">.</span>            <span class=\"token comment\"># get the taxon's immediate parent</span>\n\n  <span class=\"token variable\">?taxon_rank</span> <span class=\"token function\"><span class=\"token prefix\">rdfs<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">label</span></span> <span class=\"token variable\">?taxon_rank_label</span><span class=\"token punctuation\">.</span>\n  <span class=\"token keyword\">FILTER</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">lang</span><span class=\"token punctuation\">(</span><span class=\"token variable\">?taxon_rank_label</span><span class=\"token punctuation\">)</span> = <span class=\"token string\">\"en\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">FILTER</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">?taxon_rank</span> != <span class=\"token function\"><span class=\"token prefix\">wd<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">Q68947</span></span><span class=\"token punctuation\">)</span>         <span class=\"token comment\"># exclude taxa with rank \"subspecies\"</span>\n\n  <span class=\"token variable\">?taxon_parent</span> <span class=\"token function\"><span class=\"token prefix\">wdt<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">P225</span></span> <span class=\"token variable\">?parent_name</span><span class=\"token punctuation\">.</span>      <span class=\"token comment\"># get the parent taxon's scientific name</span>\n  <span class=\"token variable\">?reference</span> <span class=\"token function\"><span class=\"token prefix\">wdt<span class=\"token punctuation\">:</span></span><span class=\"token local-name\">P356</span></span> <span class=\"token variable\">?reference_doi</span><span class=\"token punctuation\">.</span>       <span class=\"token comment\"># get the reference DOI</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>Will get all the molecules that are associated with any taxon that is a child of Asterales. This is also very useful to quickly get all the molecules associated with a taxon.</p>\n<h2 id=\"todo-today\">Todo today<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#todo-today\"></a></h2>\n<ul class=\"contains-task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" disabled></li>\n</ul>\n<h2 id=\"doing\">Doing<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#doing\"></a></h2>\n<h2 id=\"done\">Done<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#done\"></a></h2>\n<ul>\n<li></li>\n</ul>\n<h2 id=\"todo-tomorrow\">Todo tomorrow<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#todo-tomorrow\"></a></h2>\n<ul>\n<li>[ ]</li>\n</ul>","noteIndex":{"id":"3rbfqqbp7pwbkdcrgc97u7l","title":"Anticipated Chemistry of Life","desc":"","updated":1727785927929,"created":1671985562294,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"acol-dws"},"contentHash":"f1947bd87c177e8ee5739c542c5dc574","links":[],"anchors":{"welcome-to-the-dendron-of-the-anticipated-chemistry-of-life":{"type":"header","text":"Welcome to the Dendron of the Anticipated Chemistry of Life","value":"welcome-to-the-dendron-of-the-anticipated-chemistry-of-life","line":8,"column":0,"depth":1}},"children":["l03fwlci5f5rdpot3v7oli6","zxc3pre92d542wg70hmdhgl","289i7valu3z4gm4g4lcullo","jljxwgcjy7uwcw3inriqbhd","bt513r0uipm1jyk3bi1mmwu","5ejymrqkm3f3rsmlxegreyp"],"parent":null,"data":{},"body":"\n# Welcome to the Dendron of the Anticipated Chemistry of Life\n\nThis dendron has the purpose to serve as a laboratory notebook for my PhD thesis. It will contain all the notes that I will take during my research as well as some results of the experiments and models that I will develop and test.\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":".","selfContained":true,"name":"acol-dws"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Feel free to participate and click here to edit this page on Github !","editBranch":"main","editViewMode":"tree","editRepository":"https://github.com/anticipated-chemistry-of-life/acol-dws"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","siteUrl":"https://anticipated-chemistry-of-life.github.io","assetsPrefix":"/acol-dws","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}